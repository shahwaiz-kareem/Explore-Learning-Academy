exports.id=794,exports.ids=[794],exports.modules={5976:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},6375:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(326),s=a(52),n=a(7577);let c=()=>{let{notify:e,setNotify:t}=(0,n.useContext)(s.T);return(0,n.useEffect)(()=>{if(e.notify){let e=setTimeout(()=>{t({notify:!1,success:!1,message:""})},8e3);return()=>clearTimeout(e)}},[e,t]),(0,r.jsxs)("div",{className:`${e.notify?"translate-x-0 right-1":"translate-x-full"} transition-all fixed right-0  bg-white shadow-lg rounded-xl flex items-center max-w-xs sm:max-w-sm md:max-w-md z-20 lg:max-w-lg px-4 py-3 mt-2`,children:[r.jsx("div",{className:`${e.success?"bg-green-500":"bg-red-500"} h-8 w-2 flex-shrink-0 rounded-l-xl`}),r.jsx("div",{className:"ml-3 text-gray-900 text-sm",children:e.message})]})}},3440:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(326),s=a(5666);let n=({color:e})=>r.jsx(s.Cd,{height:"2.6px",color:e,options:{showSpinner:!1},shallowRouting:!0})},52:(e,t,a)=>{"use strict";a.d(t,{RootContextProvider:()=>i,T:()=>c});var r=a(326),s=a(5047),n=a(7577);let c=(0,n.createContext)(),i=({children:e})=>{let t=(0,s.usePathname)(),[a,i]=(0,n.useState)(t.includes("dashboard")),[d,o]=(0,n.useState)({notify:!1,success:!1,message:!0});return r.jsx(c.Provider,{value:{showMenu:a,setShowMenu:i,notify:d,setNotify:o},children:e})}},1532:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>f,$$ACTION_1:()=>g,$$ACTION_2:()=>w,$$ACTION_3:()=>p,$$ACTION_4:()=>x,$$ACTION_5:()=>j,$$ACTION_6:()=>$,getBatch:()=>b,getBatches:()=>h,getBatchesCount:()=>S,getDetails:()=>T,reConstructBatches:()=>v,registerBatch:()=>m,updateBatch:()=>y});var r=a(4330);a(166);var s=a(5470),n=a(2366),c=a(5676),i=a(7708),d=a(8576),o=a(618);let l=e=>JSON.parse(JSON.stringify(e)),u=async()=>await (0,d.getSettings)(),h=(0,r.j)("5df757e2b8b69f2fca9b7d7ce3b623b582ab8b7b",f);async function f(){await (0,s.T)();try{let e=await (0,c.getStudents)(),t=await u(),a=await n.E.find(),r=t.maxStudents,s=[],i=Math.ceil(e.length/r),d=0;for(;d<i;){let t=e.slice(d*r,(d+1)*r),n=t.length;s.push({batch_no:s.length+1,active:a[d]&&a[d].active,students:t,totalStudents:n,completed:n===r}),d++}return l({success:!0,message:"Batches are created",data:s})}catch(e){throw Error(e.message)}}let b=(0,r.j)("f91e2933e5c4a2da8153377fab6a0797e6f03829",g);async function g(e){await (0,s.T)();try{let t=await n.E.findOne({batch_no:e});return l({success:!0,message:"Batch is fetched",data:t})}catch(e){throw Error(e.message)}}let m=(0,r.j)("9c18a6a866dc2ff11a6d2ac70f80ed9c4f4e97e4",w);async function w(e){await (0,s.T)();try{let t=(await u()).maxStudents,a=(await (0,c.getStudents)()).slice((e-1)*t,(e-1+1)*t),r=await n.E.create({batch_no:e,active:!1,completed:a.length===t,students:a,startDate:Date.now()});return(0,i.revalidatePath)("dashboard/batches"),(0,i.revalidatePath)("/"),l({success:!0,message:"Batch is registered successfully",data:r})}catch(e){throw Error(e.message)}}let y=(0,r.j)("f8778c678b86ad4ea18631a5b063a3cbe2d8d2d6",p);async function p(e,t){await (0,s.T)();try{return await n.E.findByIdAndUpdate(e,{$set:{...t}}),(0,i.revalidatePath)("/dashboard/batches"),(0,i.revalidatePath)("/details"),l({success:!0,message:"Batch is registered successfully"})}catch(e){throw Error(e.message)}}let S=(0,r.j)("b2fea6e4d8808b34a9f166ea7667bc572f712669",x);async function x(){await (0,s.T)();try{let e=await n.E.find();return l({count:e.length,success:!0,message:"Got all batches"})}catch(e){throw Error(e.message)}}let v=(0,r.j)("3cc58a605418b1f51577a06d4fd1426cd16190ed",j);async function j(){await (0,s.T)();try{let e=await n.E.find();await n.E.deleteMany({});let t=await u(),a=await (0,c.getStudents)(),r=t.maxStudents,s=0,d=Math.ceil(a.length/r),o=[];for(;s<d;){let t=a.slice(s*r,(s+1)*r),n=t.length,c=e[s]||{};o.push({batch_no:s+1,active:c.active||!1,students:t,totalStudents:n,completed:n===r,startDate:c.startDate||Date.now()}),s++}return await n.E.insertMany(o),(0,i.revalidatePath)("dashboard/batches"),l({success:!0,batches:o})}catch(e){throw Error(e.message)}}let T=(0,r.j)("b56717df069b6973024c19e20f451d83093e735a",$);async function $(){await (0,s.T)();try{let e=await u(),t=e.maxStudents,a=await n.E.findOne({active:!0}).lean(),r=0;return a&&(r=t-a.students.length),l({availableSeats:r,startDate:a?.startDate||new Date,...e})}catch(e){throw Error(e.message)}}(0,o.h)([h,b,m,y,S,v,T]),(0,r.j)("d56e281483b12a3a9ed623f123cdc5d84f21a046",h),(0,r.j)("a28290b6aeb124841eb06530a19962b28292c845",b),(0,r.j)("26f8614beb3a55e14e25072befcc180985c972b6",m),(0,r.j)("431123d305cdda77e6372ed3c857cfe4511eab8d",y),(0,r.j)("65b2fb799226572c47563c292e82fa50b005494c",S),(0,r.j)("fe594d6b83a9b04f62e08549095cedb62936e9c9",v),(0,r.j)("c6e4ba41f842e43d48508ee1e6d90fb3b0a1491e",T)},8576:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>b,$$ACTION_1:()=>m,getSettings:()=>g,upsertSettings:()=>f});var r=a(4330);a(166);var s=a(5470),n=a(1185),c=a.n(n);let i=new(c()).Schema({feePerMonth:{type:Number,required:[!0,"Fee per month is required"],min:[1,"Fee per month must be at least 1"]},maxStudents:{type:Number,required:[!0,"Maximum number of students is required"],min:[1,"There must be at least 1 student in the batch"]},duration:{type:Number,required:[!0,"Duration is required"],min:[1,"Duration must be at least 1 month"]},shiftTiming1:{type:String,required:[!0,"First shift timing is required"]},shiftTiming2:{type:String,required:[!0,"Second shift timing is required"]}}),d=c().models.Setting||c().model("Setting",i);var o=a(7708),l=a(1532),u=a(618);let h=e=>JSON.parse(JSON.stringify(e)),f=(0,r.j)("d5a2a228354ea883951964b11c5b6cc12af97b68",b);async function b(e){await (0,s.T)();try{let t=await d.findOneAndUpdate({},{$set:e},{new:!0,upsert:!0});return await (0,l.reConstructBatches)(),(0,o.revalidatePath)("/dashboard/batches"),(0,o.revalidatePath)("/dashboard/settings"),(0,o.revalidatePath)("/"),(0,o.revalidatePath)("/enroll"),(0,o.revalidatePath)("/details"),h(t)}catch(e){throw console.log(e),Error("Error updating settings: "+e.message)}}let g=(0,r.j)("b78171191871fbee6ff9c4a4fc7fc3f2a216c4a9",m);async function m(){await (0,s.T)();try{let e=await d.findOne({}).lean();return h(e)}catch(e){return console.log(e),h(e.message)}}(0,u.h)([f,g]),(0,r.j)("6f7fae645fadf9458dd59449d190493db2905614",f),(0,r.j)("383d09b58801c79f9bcfc80543283f781319470f",g)},5676:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>m,$$ACTION_1:()=>y,$$ACTION_2:()=>S,$$ACTION_3:()=>v,$$ACTION_4:()=>T,deleteStudent:()=>x,enrollStudent:()=>g,getStudentById:()=>p,getStudents:()=>w,getStudentsStatastics:()=>j});var r=a(4330);a(166);var s=a(5470),n=a(2366),c=a(8013),i=a(1185),d=a.n(i);let o=new(d()).Schema({name:{type:String,required:!0},father:{type:String,required:!0},age:{type:String,required:!0},education:{type:String,required:!0},gender:{type:String,required:!0},phone:{type:String,required:!0},email:{type:String,required:!0},computerSkill:{type:String,required:!0},laptop:{type:String,required:!0}},{timestamps:!0}),l=d().models.Student||d().model("Student",o);var u=a(7708),h=a(1532),f=a(618);let b=e=>JSON.parse(JSON.stringify(e)),g=(0,r.j)("d5e6c918c88c85a6e65dd467baf7a251f7a2b8f7",m);async function m(e){await (0,s.T)();try{if(!e)return b({success:!1,message:"Your data is incorrect"});let t=await l.create(e),a=await (0,h.getBatchesCount)();return 0===a.count?await (0,h.registerBatch)(1):await n.E.findOneAndUpdate({batch_no:a.count},{$push:{students:t}}),(0,u.revalidatePath)("dashboard/batches"),(0,u.revalidatePath)("dashboard/"),(0,u.revalidatePath)("/"),b({success:!0,message:"Congratulations! You have been enrolled successfully. We will contact you soon."})}catch(e){throw Error(e.message)}}let w=(0,r.j)("2b2d2caab30ec8227de16cbeceae2f592531d41b",y);async function y(){await (0,s.T)();try{let e=await l.find().sort({createdAt:1}).lean();return b(e)}catch(e){throw Error(e.message)}}let p=(0,r.j)("0726b5286c78a38c9ee43bfaec060a1d7f2fdbaa",S);async function S(e){await (0,s.T)();try{let t=await l.findById({_id:e}).lean();return b({...t})}catch(e){throw Error(e.message)}}let x=(0,r.j)("562da6de63fcf6c693510fc7283a168515ca8288",v);async function v(e,t){await (0,s.T)();try{if(!await l.findByIdAndDelete(e))return b({success:!1,message:"Student not found"});await n.E.findOneAndUpdate({batch_no:t},{$pull:{students:{_id:new c.ObjectId(e)}}});let a=await (0,h.reConstructBatches)();return b({success:!0,data:a.batches[t-1]})}catch(e){throw Error(`Error deleting student and updating batch: ${e.message}`)}}let j=(0,r.j)("2da5a9f2b817737cf23733a400b39bb479186b58",T);async function T(){await (0,s.T)();try{let e=new Date;e.setHours(0,0,0,0);let t=await l.find().lean(),a=await l.find({createdAt:{$gte:e}}).lean();return b({totalStudents:t.length,todaysStudents:a.length,todaysData:a})}catch(e){throw Error(e.message)}}(0,f.h)([g,w,p,x,j]),(0,r.j)("bdcdcad6d2483e7f78d5d0eff3b576c4caca85de",g),(0,r.j)("d8f4f017b2e83604aa07115238e6b1009a6bbd53",w),(0,r.j)("a2e1789c2b06c05dcbba7a6c0b277b468b86c7b8",p),(0,r.j)("7bafd644f7f02b42829a5058c153552fc71506a7",x),(0,r.j)("94e62f685719d4a9f09633ffc3bddf09e69d35d8",j)},1577:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(8570).createProxy)(String.raw`/home/shah23/Desktop/explore-Learning-Academy webapp/src/components/shared/Notify.jsx#default`)},7114:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(8570).createProxy)(String.raw`/home/shah23/Desktop/explore-Learning-Academy webapp/src/components/shared/TopLoader.jsx#default`)},1175:(e,t,a)=>{"use strict";a.d(t,{X:()=>s});var r=a(8570);(0,r.createProxy)(String.raw`/home/shah23/Desktop/explore-Learning-Academy webapp/src/context/RootContext.jsx#RootContext`);let s=(0,r.createProxy)(String.raw`/home/shah23/Desktop/explore-Learning-Academy webapp/src/context/RootContext.jsx#RootContextProvider`)},5470:(e,t,a)=>{"use strict";a.d(t,{T:()=>c});var r=a(1185),s=a.n(r);let n=!1,c=async()=>{if(!n)try{await s().connect(process.env.MONGO_URI),n=!0}catch(e){throw Error("Database connection error: "+e.message)}}},2366:(e,t,a)=>{"use strict";a.d(t,{E:()=>c});var r=a(1185),s=a.n(r);let n=new(s()).Schema({batch_no:{type:Number,required:!0},students:[],active:{type:Boolean,default:!1},startDate:{type:Date,required:!0},completed:{type:Boolean,default:!1}}),c=s().models.Batch||s().model("Batch",n)}};